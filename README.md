# PostON

## Описание проекта

PostON - проект, который представляет собой Jupyter Notebook, который выполняет задачи по разработка модели машинного обучения для предсказания эффективности поста в сообществе ВК в контексте исследования пользовательского поведения. Он включает в себя сбор данных из сообществ ВК, их анализ и визуализацию, а также обучение модели градиентного спуска для предсказания успешности.

## Содержание
- [Установка](#установка)
- [Структура файла](#структура-файла)
- [Библиотеки](#импорт-библиотек)
- [Функции](#функции)
- [Примечания](#примечания)
- [Контакты](#контакты)

---

## Установка

1. Убедитесь, что у вас установлен Python (>=3.8) и пакетный менеджер `pip`.
2. Склонируйте репозиторий:
   ```bash
   git clone https://github.com/yourusername/yourrepository.git
   ```
3. Установите необходимые зависимости:
   ```bash
   pip install -r requirements.txt
   ```
---

## Структура файла

Основные разделы файла:

1. **Импорт библиотек**: содержит импорт необходимых модулей и библиотек.
2. **Анализ изображений**: содержит функции для расчёта красочности изобраения и посика текста на нём
3. **Анализ текста**: содержит функции для обращения к локально развёрнутой языковой модели и семантического анализа текста.
4. **Сбор данных**: содержит функции для запроса к ВК API и подготовке данных к анализу.
5. **Анализ данных**: содержит функции для предварительного анализа данных и доказательства влияния показателей на успешность поста.
6. **Создание модели МО**: обучение модели машинного обучения на основе градиентного спуска на базе выгруженных данных.

## Импорт библиотек:
Код использует различные библиотеки для обработки изображений, текстов, анализа данных и взаимодействия с API. Вот список импортируемых библиотек:

- **requests**: для отправки HTTP-запросов.
- **time**: для работы с задержками.
- **pickle**: для сериализации объектов.
- **datetime**: для работы с датами и временем.
- **json**: для работы с JSON-данными.
- **pandas**: для обработки данных в табличном виде.
- **cv2**: для обработки изображений с помощью OpenCV.
- **numpy**: для работы с многомерными массивами и математическими операциями.
- **PIL**: для работы с изображениями.
- **torchvision**: для работы с предобученными моделями машинного обучения.
- **transformers**: для работы с предобученными трансформерами (например, для обработки текста).
- **easyocr**: для извлечения текста из изображений с использованием OCR.
- **matplotlib**: для визуализации данных.
- **seaborn**: для улучшенной визуализации.
- **re**: для работы с регулярными выражениями.

---

## Функции:

#### 2.1 `detect_text(image_path)`
- **Описание**: Функция для обнаружения текста в изображении с использованием библиотеки `easyocr`.
- **Параметры**:
  - `image_path`: путь к изображению.
- **Возвращаемое значение**: 
  - 1, если текст найден, иначе 0.

#### 2.2 `calculate_colorfulness(image_path)`
- **Описание**: Оценка красочности изображения.
- **Параметры**:
  - `image_path`: путь к изображению.
- **Возвращаемое значение**: целое число от 1 до 10, представляющее красочность изображения.

#### 2.3 `llama_request(prompt)`
- **Описание**: Отправка запроса к модели LLM (например, llama) для получения текста на основе предоставленного запроса.
- **Параметры**:
  - `prompt`: текст запроса.
- **Возвращаемое значение**: текстовый ответ от модели LLM.

#### 2.4 `analyze_post(post_text)`
- **Описание**: Функция для анализа текста поста на основе различных характеристик, таких как тематика, структура, тональность и эмоциональная окраска.
- **Параметры**:
  - `post_text`: текст поста.
- **Возвращаемое значение**: словарь с результатами анализа (тематика, структура текста, тональность и эмоции).

#### 2.5 `getjson(url, data=None)`
- **Описание**: Отправка GET-запроса по указанному URL с параметрами и получение JSON-ответа.
- **Параметры**:
  - `url`: URL для запроса.
  - `data`: параметры запроса.
- **Возвращаемое значение**: JSON-ответ от сервера.

#### 2.6 `get_all_postss(access_token, owner_id, count=500, offset=0)`
- **Описание**: Функция для получения всех постов пользователя/группы из ВКонтакте с пагинацией.
- **Параметры**:
  - `access_token`: токен доступа.
  - `owner_id`: идентификатор владельца (пользователь или группа).
  - `count`: количество постов для получения.
  - `offset`: смещение для пагинации.
- **Возвращаемое значение**: количество постов.

#### 2.7 `get_all_posts(access_token, owner_id, count=500, offset=0)`
- **Описание**: Аналогична функции `get_all_postss`, но возвращает все посты.
- **Возвращаемое значение**: Список постов.

#### 2.8 `filter_data(all_posts)`
- **Описание**: Фильтрация данных по постам, извлечение значений таких как ID, текст, количество лайков, комментариев, и фото.
- **Параметры**:
  - `all_posts`: список всех постов.
- **Возвращаемое значение**: Отфильтрованные данные постов в виде списка словарей.

#### 2.9 `get_all_liked_lists(access_token, owner_id, liked_object_id, count=1000, offset=0, friends_only=0)`
- **Описание**: Получение списка пользователей, которые поставили лайк на пост.
- **Параметры**:
  - `access_token`: токен доступа.
  - `owner_id`: идентификатор владельца.
  - `liked_object_id`: ID объекта, на который поставили лайк.
- **Возвращаемое значение**: количество пользователей и список их ID.

#### 2.10 `get_all_users_bdate(access_token, user_ids, fields, count=1000, offset=0, friends_only=0)`
- **Описание**: Получение информации о пользователях (дата рождения и пол).
- **Параметры**:
  - `access_token`: токен доступа.
  - `user_ids`: список ID пользователей.
  - `fields`: дополнительные поля (например, пол и дата рождения).
- **Возвращаемое значение**: Список пользователей с указанными полями.

#### 2.11 `get_subs(access_token, owner_id, count=100, offset=0)`
- **Описание**: Получение списка участников группы/подписчиков.
- **Параметры**:
  - `access_token`: токен доступа.
  - `owner_id`: идентификатор владельца группы.
- **Возвращаемое значение**: Список подписчиков.

#### 2.12 `anylyse_url(url)`
- **Описание**: Анализирует изображение, скачанное по URL, извлекает текст и оценивает красочность.
- **Параметры**:
  - `url`: URL изображения.
- **Возвращаемое значение**: кортеж с наличием текста и уровнем красочности.

---

## Примечания:
- **Модели машинного обучения**: В коде используется модель Llama для анализа текста, а также предобученные модели для анализа изображений (OCR и оценка цветности).
- **OCR**: Используется `easyocr` для извлечения текста из изображений.
- **API ВКонтакте**: Для взаимодействия с ВКонтакте используется API для получения постов, пользователей и лайков.
- **Этап разработки**: На данный момент сайт находится в разработке. Front сайта хостится на firebase-google, а Back сайта запущен в codespace github

## Практическая реализация:
- **Front-end**: Сайт проекта написан на фремворке vue.js. Компоненты хранятся в папке src
- **Back-end**: Сервер написан с помощью библиотеки FastApi.
  
## Контакты

Если у вас есть вопросы или предложения, свяжитесь со мной:
- **Email**: sasacuvpilo@gmail.com
- **Telegram**: @Chuvpilo_Alexander
